{
    "type": "Ext.app.ViewController",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "common_popup_dateselect",
        "designer|userClassName": "common.popup.DateSelectPopupViewController"
    },
    "name": "MyWindowViewController",
    "designerId": "83ef0934-ef3a-4cfa-978e-4cf72d54e9b8",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "button,type, value"
                ],
                "fn": "SetSearchDate",
                "implHandler": [
                    "var year = '2015'; // 회기연도",
                    "var start_date = new Date(year, 0,1); // 회기시작일",
                    "var end_date = new Date(year, 11, 31);  // 회기종료일",
                    "",
                    "var temp_date = new Date();",
                    "temp_date.setFullYear(year);",
                    "",
                    "",
                    "",
                    "var type = button.params.type;",
                    "var value = 0;",
                    "if(button.params.value!==undefined) {",
                    "    value = button.params.value;",
                    "}",
                    "",
                    "",
                    "var sdate = this.lookupReference('sdate').value;",
                    "var edate = this.lookupReference('edate').value;",
                    "",
                    "",
                    "",
                    "if(sdate.length===0) {",
                    "    sdate = temp_date;",
                    "} else {",
                    "    sdate = new Date(sdate);",
                    "}",
                    "",
                    "if(edate.length===0) {",
                    "    edate = temp_date;",
                    "} else {",
                    "    edate = new Date(edate);",
                    "}",
                    "",
                    "if(!isNaN(value)) {",
                    "    value = Number(value);",
                    "}",
                    "",
                    "",
                    "",
                    "",
                    "if(type=='dt') { // 일단위",
                    "    if(!isNaN(value)){",
                    "        temp_date.setDate(temp_date.getDate()+value);",
                    "        sdate = temp_date;",
                    "    } else {",
                    "        if(value=='b') value = -1;",
                    "        else if(value=='n') value = 1;",
                    "        sdate.setDate(sdate.getDate()+value);",
                    "    }",
                    "",
                    "    if (sdate>end_date) {",
                    "        edate = end_date;",
                    "    }",
                    "    ",
                    "    if(sdate>end_date) sdate = end_date;",
                    "    else if(sdate<start_date) sdate = start_date;",
                    "    ",
                    "    edate = sdate;",
                    "",
                    "} else if (type=='wt') { // 주단위",
                    "",
                    "",
                    "    if(!isNaN(value)){",
                    "        temp_date.setDate(temp_date.getDate()+value*7);",
                    "        sdate = temp_date;",
                    "    } else {",
                    "        if(value=='b') value = -1;",
                    "        else if(value=='n') value = 1;",
                    "",
                    "        sdate.setDate(sdate.getDate()+value*7);",
                    "    }",
                    "    ",
                    "    sdate = new Date(sdate.getFullYear(), sdate.getMonth(), sdate.getDate() - sdate.getDay());",
                    "    edate = new Date(sdate.getFullYear(), sdate.getMonth(), sdate.getDate()+6);",
                    "",
                    "    ",
                    "    if(sdate>end_date){",
                    "        sdate = new Date(end_date.getFullYear(), end_date.getMonth(), end_date.getDate() - end_date.getDay());",
                    "    }",
                    "    if(edate<start_date) {",
                    "        edate = new Date(start_date.getFullYear(), start_date.getMonth(), start_date.getDate() - start_date.getDay() + 6);",
                    "    }",
                    "    ",
                    "",
                    "} else if (type=='mt') { // 월단위",
                    "",
                    "    if(!isNaN(value)) {",
                    "        sdate = new Date();",
                    "    } else if(value=='b') {",
                    "        value = -1;",
                    "    } else if (value=='n'){",
                    "        value = 1;",
                    "    }",
                    "    sdate = new Date(sdate.getFullYear(),sdate.getMonth()+value);",
                    "    edate = new Date(sdate.getFullYear(),sdate.getMonth()+1,'');",
                    "",
                    "    ",
                    "    if(sdate>end_date){",
                    "        sdate = new Date(end_date.getFullYear(),end_date.getMonth());",
                    "    }",
                    "    if(edate<start_date) {",
                    "        edate = new Date(start_date.getFullYear(),start_date.getMonth()+1,'');",
                    "    }",
                    "",
                    "",
                    "} else if (type=='qt') {",
                    "    sdate = new Date(year, (value-1)*3);",
                    "    edate = new Date(year, (value)*3,'');",
                    "",
                    "} else if (type=='ht') {",
                    "    sdate = new Date(year, (value-1)*6);",
                    "    edate = new Date(year, (value)*6,'');",
                    "",
                    "",
                    "} else if (type=='yt') {",
                    "    sdate = start_date;",
                    "    edate = end_date;",
                    "}",
                    "",
                    "",
                    "// 시작일, 종료일이 회기일자를 벗어날경우 초기화",
                    "if(sdate<start_date) {",
                    "    sdate = start_date;",
                    "}",
                    "if(edate>end_date){",
                    "    edate = end_date;",
                    "}",
                    "",
                    "",
                    "this.lookupReference('sdate').setValue(sdate);",
                    "this.lookupReference('edate').setValue(edate);",
                    "",
                    "return [sdate, edate];"
                ]
            },
            "name": "SetSearchDate",
            "designerId": "bb096656-36ae-4b4c-9c1f-bd05979afa18"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "value"
                ],
                "fn": "ConvertStringToDate",
                "implHandler": [
                    "var date = new Date();",
                    "if(value.length>0){",
                    "    var year = value.substring(0, 4);",
                    "    var month = value.substring(5, 7);",
                    "    var day = value.substring(8, 10);",
                    "    console.log(year+' '+month+' '+day);",
                    "    date = new Date(year,month,day);",
                    "}",
                    "",
                    "return date;",
                    ""
                ]
            },
            "name": "ConvertStringToDate",
            "designerId": "f6abfde9-2e9e-40c0-8c72-085a358bff56"
        }
    ]
}